<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Location-based AR.js demo</title>
    <script src="js/common.js"></script>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.3.0/aframe/build/aframe-ar-nft.js"></script>
    <script>
    
    AFRAME.registerComponent('clickhandler', {
        init: function() {
            this.el.addEventListener('click', () => {
                console.log(this.el);
                alert(`You are ${this.el.distancemsg} from the bee`);
            });
        }
    });

    setTimeout(()=>{
        const scene = document.querySelector('a-scene');
        const icon = document.createElement('a-entity');
        icon.setAttribute('gps-entity-place', `latitude: ${53.543909}; longitude: ${-113.442837}`);
        icon.setAttribute('gltf-model', "#asset");      
        icon.setAttribute('scale', '0.05 0.05 0.05');
        icon.setAttribute('clickhandler', '');

        scene.appendChild(icon);
        console.log('wtf');
    }, 5000)
    </script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene cursor='rayOrigin: mouse; fuse: true; fuseTimeout: 0;' 
        raycaster="objects: [clickhandler];" 
        debug vr-mode-ui="enabled: false" 
        embedded arjs="sourceType: webcam; debugUIEnabled: true;">


        <a-assets>
            <a-asset-item src="models/woodenmug/scene.gltf" id="asset"></a-asset-item>
        </a-assets>

        <!--<a-entity gltf-model="#test" scale="10 10 10" gps-entity-place="latitude: 53.543909; longitude: -113.442837;" animation-mixer/>-->


        <!--<a-image clickhandler gps-entity-place="latitude: 53.543909; longitude: -113.442837" scale="3 3 3" src="img/bee.png">
        </a-image>
        <a-image clickhandler gps-entity-place="latitude: 53.544714; longitude: -113.439948" scale="3 3 3" src="img/bee.png">
        </a-image> -->
        <a-camera gps-camera="maxDistance: 100;" rotation-reader> </a-camera>
    </a-scene>
</body>

</html>